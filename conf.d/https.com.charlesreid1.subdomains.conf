####################
#
# charlesreid1.com subdomains
# redirecting to blackbeard:
# - pages
# - hooks
# - bots
# 
# blackbeard:
# 10.5.0.2
# 
# krash:
# 10.5.0.1
#
####################

server {
    listen 443;
    listen [::]:443;
    server_name pages.charlesreid1.com;

    ssl on;
    ssl_certificate /etc/letsencrypt/live/pages.charlesreid1.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/pages.charlesreid1.com/privkey.pem;
    include /etc/letsencrypt/options-ssl-nginx.conf;

    client_max_body_size 100m;

    location / {
        # https://docs.nginx.com/nginx/admin-guide/web-server/reverse-proxy/
        proxy_set_header X-Real-IP  $remote_addr;
        proxy_set_header X-Forwarded-For $remote_addr;
        proxy_set_header Host $host;
        proxy_pass http://54.191.178.27:7777;
    }
}

server {
    listen 443;
    listen [::]:443;
    server_name hooks.charlesreid1.com;

    ssl on;
    ssl_certificate /etc/letsencrypt/live/hooks.charlesreid1.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/hooks.charlesreid1.com/privkey.pem;
    include /etc/letsencrypt/options-ssl-nginx.conf;

    client_max_body_size 100m;

    location / {
        proxy_set_header X-Real-IP  $remote_addr;
        proxy_set_header X-Forwarded-For $remote_addr;
        proxy_set_header Host $host;
        proxy_pass http://54.191.178.27:7778;
    }
}

server {
    # https://bots.charlesreid1.com
    listen 443;
    listen [::]:443;
    server_name bots.charlesreid1.com;

    ssl on;
    ssl_certificate /etc/letsencrypt/live/bots.charlesreid1.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/bots.charlesreid1.com/privkey.pem;
    include /etc/letsencrypt/options-ssl-nginx.conf;

    client_max_body_size 100m;

    location / {
        proxy_set_header X-Real-IP  $remote_addr;
        proxy_set_header X-Forwarded-For $remote_addr;
        proxy_set_header Host $host;
        proxy_pass http://54.191.178.27:7779;
    }
}

